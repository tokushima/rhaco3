<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>rhaco.org</title>

    <!-- Bootstrap core CSS -->
	<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
  </head>

  <body>

    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container-fluid">
          <div class="navbar-header">
            <a class="navbar-brand" href="#">rhaco.org</a>
          </div>
          
          <div class="navbar-collapse collapse">          
            <ul class="nav navbar-nav navbar-right">
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">rhaco3 <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li>ドキュメント</li>
                  <li class="divider"></li>
                  <li><a href="../../contents/rhaco3/entry.html">エントリー</a></li>
                  <li><a href="../../contents/rhaco3/dao.html">O/Rマッパー</a></li>
                  <li><a href="../../contents/rhaco3/template.html">テンプレートエンジン</a></li>
                  <li><a href="../../contents/rhaco3/object.html">オブジェクト</a></li>
                </ul>
              </li>              
            </ul>
          </div>
        </div>    
    </div>

    <div class="jumbotron">
      <div class="container">
      	
	<h2>オブジェクト</h2>
	<div>
		rhaco.Objectを基底クラスにすることでプロパティやアクセサの挙動を容易に変更できます。
	</div>

      </div>
    </div>

    <div class="container">
   	  
	<h3>特殊メソッド ( protected )</h3>
	<p class="alert alert-info">
		特殊な名前をもったメソッドを定義することで独自の振る舞いをすることができます。
	</p>
	<table class="table table-striped table-bordered table-condensed">
		<thead>
		<tr>
			<th>メソッド名</th>
			<th>説明</th>
		</tr>
		</thead>
		<tbody>
		<tr>
			<td>__new__</td>
			<td>コンストラクタを拡張する</td>
		</tr>
		<tr>
			<td>__init__</td>
			<td>コンストラクタで初期処理を行う</td>
		</tr>
		<tr>
			<td>__anon__</td>
			<td>コンストラクタでアノテーションを処理する</td>
		</tr>
		<tr>
			<td>__del__</td>
			<td>デストラクタを拡張する</td>
		</tr>
		<tr>
			<td>__str__</td>
			<td>オブジェクトの文字列表現を拡張する</td>
		</tr>
		</tbody>
	</table>
	<div style="margin-top:20px; color:#7a43b6; font-weight: bold;">作成例</div><pre class="prettyprint">&lt;?php
namespace abc;
/**
 * @var integer $abc 数値
 */
class Hoge extends \rhaco\Object{
&nbsp;&nbsp;protected $abc;
&nbsp;&nbsp;
&nbsp;&nbsp;protected function __new__($i){
&nbsp;&nbsp;&nbsp;&nbsp;$this->abc = $i;
&nbsp;&nbsp;}
&nbsp;&nbsp;protected function __init__(){
&nbsp;&nbsp;&nbsp;&nbsp;$this->abc = $this->abc + 10;
&nbsp;&nbsp;}
&nbsp;&nbsp;protected function __str__(){
&nbsp;&nbsp;&nbsp;&nbsp;return &#039;[&#039;.$this->abc.&#039;]&#039;;
&nbsp;&nbsp;}
}</pre>
	<div style="margin-top:20px; color:#7a43b6; font-weight: bold;">使用例</div><pre class="prettyprint">&lt;?php
include(&#039;bootstrap.php&#039;);

$obj = new \rhaco\Hoge(10);
var_dump($obj->abc());
var_dump((string)$obj);</pre>
	<div style="margin-top:20px; color:#7a43b6; font-weight: bold;">結果</div><pre style="background-color:#fff; color:#000; border-color:#000; padding:5px;">int(20)
string(4) &quot;[20]&quot;</pre>

	
	<h3 style="margin-top: 50px;">プロパティのアクセサをカスタマイズする</h3>
	<p class="alert alert-info">
		protectedまたはpublicで定義されたプロパティは自動的に同名のメソッドをGetter,Setterとして扱う事ができます。
	</p>
	<div style="margin-top:20px; color:#7a43b6; font-weight: bold;">作成例</div><pre class="prettyprint">&lt;?php
namespace abc;
/**
 * @var integer $abc 数値
 * @var string $def 文字列
 */
class Hoge extends \rhaco\Object{
&nbsp;&nbsp;protected $abc;
&nbsp;&nbsp;protected $def;
&nbsp;&nbsp;
&nbsp;&nbsp;protected function __get_abc__(){
&nbsp;&nbsp;&nbsp;&nbsp;return $this->abc + 10;
&nbsp;&nbsp;}
}</pre>
	<div style="margin-top:20px; color:#7a43b6; font-weight: bold;">使用例</div><pre class="prettyprint">&lt;?php
$obj = new \abc\Hoge();
$obj->abc(&#039;warn&#039;);
var_dump($obj->abc());</pre>
	<div style="margin-top:20px; color:#7a43b6; font-weight: bold;">結果</div><pre style="background-color:#fff; color:#000; border-color:#000; padding:5px;">int(123)</pre>
	
	<p class="alert alert-info">
		クラスコメントに@varで宣言することでプロパティの型を定義する事ができます。
	</p>
	<table class="table table-striped table-bordered table-condensed">
		<thead>
		<tr>
			<th>型</th>
			<th>説明</th>
		</tr>
		</thead>
		<tbody>
		<tr>
			<td>number</td>
			<td>アノテーションdecimal_placesでサイズを指定します</td>
		</tr>
		<tr>
			<td>serial</td>
			<td>シリアル型 数値</td>
		</tr>
		<tr>
			<td>boolean</td>
			<td>真偽値型 true/false/null</td>
		</tr>
		<tr>
			<td>timestamp</td>
			<td>タイムスタンプ型 YYYY/MM/DD HH:ii:ss</td>
		</tr>
		<tr>
			<td>date</td>
			<td>日付型 YYYY/MM/DD</td>
		</tr>
		<tr>
			<td>time</td>
			<td>時間型 HH:ii:ss</td>
		</tr>
		<tr>
			<td>intdate</td>
			<td>数値形式の日付型 YYYYMMDD</td>
		</tr>
		<tr>
			<td>email</td>
			<td>email型</td>
		</tr>
		<tr>
			<td>alnum</td>
			<td>英数値型 0-9,A-Z,a-z,_</td>
		</tr>
		</tbody>
	</table>
	
	<p class="alert alert-info">
		特殊なprefixをもったprotectedメソッドを定義することでアクセサを拡張します。
	</p>
	<p>プロパティ名abcの場合</p>
	<table class="table table-striped table-bordered table-condensed">
		<thead>
		<tr>
			<th>メソッド名</th>
			<th>説明</th>
		</tr>
		</thead>
		<tbody>
		<tr>
			<td>__get_abc__</td>
			<td>Getter を拡張します</td>
		</tr>
		<tr>
			<td>__set_abc__</td>
			<td>Setter を拡張します</td>
		</tr>
		<tr>
			<td>__in_abc__</td>
			<td>inを拡張します</td>
		</tr>
		<tr>
			<td>__is_abc__</td>
			<td>isを拡張します</td>
		</tr>
		<tr>
			<td>__ar_abc__</td>
			<td>arを拡張します</td>
		</tr>
		<tr>
			<td>__fm_abc__</td>
			<td>fmを拡張します</td>
		</tr>
		<tr>
			<td>__rm_abc__</td>
			<td>rmを拡張します</td>
		</tr>
		</tbody>
	</table>

      </div>
      
      <hr>

      <footer>
      </footer>
    </div> <!-- /container -->
</rt:block>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
	<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
	<script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
  </body>
</html>


